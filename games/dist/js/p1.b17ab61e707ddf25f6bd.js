(()=>{"use strict";var t={39:(t,e,s)=>{s.r(e)},533:(t,e,s)=>{s.r(e)},912:(t,e,s)=>{s.r(e)},881:(t,e,s)=>{s.r(e)},289:(t,e,s)=>{s.r(e)},581:(t,e,s)=>{s.r(e)},359:(t,e,s)=>{s.r(e)},972:(t,e,s)=>{s.r(e)},177:(t,e,s)=>{s.r(e)},296:(t,e,s)=>{s.r(e)},298:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),s(581),e.default=class{constructor(t){this.class=t.class}render(){return i(this,void 0,void 0,(function*(){return`\n    <div class="wrapper footer__wrapper ${this.class?this.class:""}">\n      <div class="footer__content">\n        <a class="link contacts__link" href="https://github.com/Andrei-Anaheim">Andrei-Anaheim</a>  \n        <div>2022</div>\n      </div>\n    </div>\n    `}))}after_render(){return i(this,void 0,void 0,(function*(){}))}}},473:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(275)),a=r(s(364)),o=r(s(615));s(359),e.default=class{constructor(t){this.class=t.class}render(){return i(this,void 0,void 0,(function*(){const t=yield n.default.drawComponent(o.default,{class:"login",id:"authorization-form"}),e=yield n.default.drawComponent(a.default,{id:"authorization-button",class:"header__button",text:o.default.isAuthorized?"Log out":"Log in"});return`\n    <div class="wrapper header__wrapper ${this.class?this.class:""}">\n      <a href="#" class="instead-of-logo">A.T.</a>\n      <nav class="header__navigation">\n        <ul class="navigation">\n          <li>\n            <a href="#/nine/start" class="link navigation__link" id="nine">Nine</a>\n          </li>\n          <li>\n            <a href="#/2048" class="link navigation__link" id="2048">2048</a>\n          </li>\n          <li>\n            <a href="#/battleships" class="link navigation__link" id="battleships">Battleships</a>\n          </li>\n          \x3c!--<li>\n            <a href="#/audio_challenge" class="link navigation__link" id="audio_challenge"\n              >Audio challenge</a\n            >\n          </li>\n          <li><a href="#/sprint" class="link navigation__link" id="sprint">Sprint</a></li> --\x3e\n        </ul>\n      </nav>\n      ${e}\n    </div>\n    ${t}\n    `}))}showActiveMenuItem(){const t=window.location.hash.slice(2).toLowerCase();document.querySelectorAll(".navigation__link").forEach((t=>t.classList.remove("active")));const e=document.getElementById(t);e&&e.classList.add("active")}after_render(){return i(this,void 0,void 0,(function*(){this.showActiveMenuItem(),window.addEventListener("hashchange",this.showActiveMenuItem);const t=document.getElementById("authorization-button"),e=document.getElementById("authorization-form"),s=document.querySelectorAll(".login__form input");t.addEventListener("click",(()=>{o.default.isAuthorized?(o.default.isAuthorized=!1,s.forEach((t=>t.value="")),localStorage.clear(),t.innerHTML="Log in"):e.classList.add("active")}))}))}}},931:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),s(39);const r=i(s(360));e.default=class{start(){(new r.default).init()}}},615:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(275)),a=r(s(364)),o=r(s(892));s(533);class h{constructor(t){this.text={"Sign in":["Sign in","Don't have an account?","Log in"],"Sign up":["Sign up","Already have an account?","Create an account"]},this.class=t.class,this.id=t.id,this.type="Sign in",this.action=this.loginUser}render(){return i(this,void 0,void 0,(function*(){this.getLocalStorage();const t=yield n.default.drawComponent(a.default,{id:"authorization-form-button",class:"login__button",text:`${this.text[this.type][2]}`});return`\n    <div id="${this.id?this.id:""}" class="${this.class?this.class:""}">\n      <div class="login__body">\n        <form class="login__form" novalidate>\n          <div class="login__close"></div>\n          <h1>${this.type}</h1>\n          <div class="login__content">\n            <input\n              id="email"\n              name="email"\n              placeholder="email"\n              type="email"/>\n            <p class="error login__error-text" id="email-error"></p>\n            <input\n              id="password"\n              name="password"\n              placeholder="password"\n              type="password"/>\n            <p class="error login__error-text" id="password-error"></p>\n              <p class="login__text link">\n                ${this.text[this.type][1]}\n              </p>\n            ${t}\n          </div>\n        </form>\n      </div>\n    </div>\n    `}))}setLocalStorage(){localStorage.setItem("userInfo",JSON.stringify(h.authorizationInfo))}getLocalStorage(){const t=localStorage.getItem("userInfo");t&&(h.authorizationInfo=JSON.parse(t),h.isAuthorized=!0)}showErrorMessage(t,e){const s=document.getElementById(t);s.innerHTML=e;const i=s.previousElementSibling;"INPUT"===(null==i?void 0:i.tagName)&&i.classList.add("error")}changeForm(){"Sign in"===this.type?(this.type="Sign up",this.action=this.createUser):(this.type="Sign in",this.action=this.loginUser)}createUser(t,e){return i(this,void 0,void 0,(function*(){try{const s=yield o.default.createUser({name:"user",email:t,password:e});if(s.error)return void s.error.errors.forEach((t=>{const e="e"===t.message[1]?"email-error":"password-error";this.showErrorMessage(e,t.message)}));yield this.loginUser(t,e)}catch(t){"SyntaxError: Unexpected token u in JSON at position 0"==t&&this.showErrorMessage("email-error","account with this email already exists")}}))}loginUser(t,e){return i(this,void 0,void 0,(function*(){try{const s=yield o.default.loginUser({email:t,password:e});h.isAuthorized=!0,h.authorizationInfo=s,this.setLocalStorage()}catch(t){"SyntaxError: Unexpected token F in JSON at position 0"==t&&this.showErrorMessage("password-error","Wrong password"),"SyntaxError: Unexpected token C in JSON at position 0"==t&&this.showErrorMessage("email-error","account with this email doesn't exist.")}}))}after_render(){return i(this,void 0,void 0,(function*(){const t=document.getElementById(this.id),e=t.querySelector("form"),s=e.querySelector(".login__text"),r=e.querySelector("H1"),n=t.querySelectorAll("input"),a=document.getElementById("authorization-form-button"),o=()=>{t.classList.remove("active")};t.addEventListener("click",(t=>{const e=t.target;e.closest(".login__form")&&!e.classList.contains("login__close")||o()})),a.addEventListener("click",(t=>i(this,void 0,void 0,(function*(){t.preventDefault();const s=e.elements.email.value,i=e.elements.password.value;yield this.action(s,i),h.isAuthorized&&(document.getElementById("authorization-button").innerHTML="Log out",o())})))),s.addEventListener("click",(()=>{this.changeForm(),n[1].focus(),n[0].focus(),r.innerHTML=this.type,s.innerHTML=this.text[this.type][1],a.innerHTML=this.text[this.type][2]})),n.forEach((t=>{t.addEventListener("focus",(()=>{t.classList.remove("error"),t.nextElementSibling&&(t.nextElementSibling.innerHTML="")}))}))}))}}h.isAuthorized=!1,e.default=h},364:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),s(912),e.default=class{constructor(t){this.class=t.class,this.id=t.id,this.text=t.text}render(){return i(this,void 0,void 0,(function*(){return`\n      <button id="${this.id?this.id:""}" class="button \n      ${this.class?this.class:""}">${this.text}</button>\n    `}))}after_render(){return i(this,void 0,void 0,(function*(){}))}}},275:function(t,e){var s=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});class i{static drawComponent(t,e={}){return s(this,void 0,void 0,(function*(){const s=new t(e);return this.renderComponentStack.push(s),yield s.render()}))}static drawPage(t){return s(this,void 0,void 0,(function*(){for(document.getElementById("page_container").innerHTML=yield t.render();this.renderComponentStack.length;){const t=this.renderComponentStack.pop();t&&(yield t.after_render())}yield t.after_render()}))}}i.renderComponentStack=[],e.default=i},561:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),s(881),e.default=class{constructor(){this.array2048=["","","","","","","","","","","","","","","",""],this.previousTurnArray=["","","","","","","","","","","","","","","",""],this.continueAfter2048=!1}render(){return i(this,void 0,void 0,(function*(){return'\n    <div class="box2048">\n      <div class="field" id="field1"></div>\n      <div class="field" id="field2"></div>\n      <div class="field" id="field3"></div>\n      <div class="field" id="field4"></div>\n      <div class="field" id="field5"></div>\n      <div class="field" id="field6"></div>\n      <div class="field" id="field7"></div>\n      <div class="field" id="field8"></div>\n      <div class="field" id="field9"></div>\n      <div class="field" id="field10"></div>\n      <div class="field" id="field11"></div>\n      <div class="field" id="field12"></div>\n      <div class="field" id="field13"></div>\n      <div class="field" id="field14"></div>\n      <div class="field" id="field15"></div>\n      <div class="field" id="field16"></div>\n    </div>\n    <div class="button start2048" id="start2048">Start</div>\n    <div class="result2048" id="result2048" style="display:none">\n        <p class="winner2048">Игра окончена.<br>Ваш результат:</p>\n        <div class="button" id="new2048game">Новая игра</div>\n    </div>\n    <div class="get2048" id="get2048" style="display:none">\n        <p class="winner2048">Вы достигли 2048!</p>\n        <div class="button" id="new2048game2">Новая игра</div>\n        <div class="button" id="continue2048">Продолжить</div>\n    </div>\n      '}))}start2048(){this.continueAfter2048=!1,document.addEventListener("keydown",(()=>{this.getKey.bind(this)})),document.getElementById("start2048").classList.add("hide"),this.createNumber(),this.updFields(),this.previousTurnArray=this.array2048.slice()}updFields(){for(let t=0;t<this.array2048.length;t+=1)document.getElementById(`field${t+1}`).innerText=`${this.array2048[t]}`,document.getElementById(`field${t+1}`).setAttribute("class",`field fieldColor${this.array2048[t]}`)}endGame(){let t=0;for(let e=0;e<this.array2048.length;e+=1)t+=Number(this.array2048[e]);document.getElementById("result2048").innerHTML=`<p class="winner2048">Игра окончена.<br>Ваш результат: ${t}</p><div class="button" id="new2048game">Новая игра</div>`,document.getElementById("result2048").setAttribute("style","disply: flex"),document.getElementById("new2048game").addEventListener("click",(()=>window.location.reload()))}get2048(){document.getElementById("get2048").setAttribute("style","disply: flex"),document.getElementById("continue2048").addEventListener("click",(()=>{this.continueAfter2048=!0,document.getElementById("get2048").setAttribute("style","display: none")}))}leftKey(){for(let t=0;t<4;t+=1){if(""===this.array2048[4*t]||""===this.array2048[4*t+1]||""===this.array2048[4*t+2]||""===this.array2048[4*t+3]){const e=this.array2048.slice().splice(4*t,4).filter((t=>""!==t));this.array2048[4*t+3]="",this.array2048[4*t+2]=3===e.length?e[2]:"",this.array2048[4*t+1]=e.length>=2?e[1]:"",this.array2048[4*t]=e.length>=1?e[0]:""}this.array2048[4*t]===this.array2048[4*t+1]&&(""!==this.array2048[4*t]?(this.array2048[4*t]=(2*Number(this.array2048[4*t])).toString(),this.array2048[4*t+1]=this.array2048[4*t+2],this.array2048[4*t+2]=this.array2048[4*t+3],this.array2048[4*t+3]=""):this.array2048[4*t+2]===this.array2048[4*t+3]?""!==this.array2048[4*t+2]?(this.array2048[4*t]=(2*Number(this.array2048[4*t+2])).toString(),this.array2048[4*t+1]="",this.array2048[4*t+2]="",this.array2048[4*t+3]=""):(this.array2048[4*t]="",this.array2048[4*t+1]="",this.array2048[4*t+2]="",this.array2048[4*t+3]=""):(this.array2048[4*t]=this.array2048[4*t+2],this.array2048[4*t+1]=this.array2048[4*t+3],this.array2048[4*t+2]="",this.array2048[4*t+3]="")),this.array2048[4*t+1]===this.array2048[4*t+2]&&(""!==this.array2048[4*t+1]?(this.array2048[4*t+1]=(2*Number(this.array2048[4*t+1])).toString(),this.array2048[4*t+2]=this.array2048[4*t+3],this.array2048[4*t+3]=""):(this.array2048[4*t+1]=this.array2048[4*t+3],this.array2048[4*t+2]="",this.array2048[4*t+3]="")),this.array2048[4*t+2]===this.array2048[4*t+3]&&""!==this.array2048[4*t+2]&&(this.array2048[4*t+2]=(2*Number(this.array2048[4*t+2])).toString(),this.array2048[4*t+3]="")}this.updFields(),this.array2048.toString()===this.previousTurnArray.toString()?(document.addEventListener("keydown",(t=>{this.getKey(t)}),{once:!0}),0===this.array2048.map(((t,e)=>""===t?e:-1)).filter((t=>-1!==t)).length&&0===this.isPossibleMoves()&&this.endGame()):setTimeout((()=>{this.createNumber(),this.previousTurnArray=this.array2048.slice()}),100)}downKey(){for(let t=0;t<4;t+=1){if(""===this.array2048[t]||""===this.array2048[t+4]||""===this.array2048[t+8]||""===this.array2048[t+12]){const e=Array.from([this.array2048[t],this.array2048[t+4],this.array2048[t+8],this.array2048[t+12]]).filter((t=>""!==t));this.array2048[t]="",this.array2048[t+4]=3===e.length?e[e.length-3]:"",this.array2048[t+8]=e.length>=2?e[e.length-2]:"",this.array2048[t+12]=e.length>=1?e[e.length-1]:""}this.array2048[t+12]===this.array2048[t+8]&&(""!==this.array2048[t+12]?(this.array2048[t+12]=(2*Number(this.array2048[t+12])).toString(),this.array2048[t+8]=this.array2048[t+4],this.array2048[t+4]=this.array2048[t],this.array2048[t]=""):this.array2048[t+4]===this.array2048[t]?""!==this.array2048[t+4]?(this.array2048[t+12]=(2*Number(this.array2048[t+4])).toString(),this.array2048[t+8]="",this.array2048[t+4]="",this.array2048[t]=""):(this.array2048[t+12]="",this.array2048[t+8]="",this.array2048[t+4]="",this.array2048[t]=""):(this.array2048[t+12]=this.array2048[t+4],this.array2048[t+8]=this.array2048[t],this.array2048[t+4]="",this.array2048[t]="")),this.array2048[t+8]===this.array2048[t+4]&&(""!==this.array2048[t+8]?(this.array2048[t+8]=(2*Number(this.array2048[t+8])).toString(),this.array2048[t+4]=this.array2048[t],this.array2048[t]=""):(this.array2048[t+8]=this.array2048[t],this.array2048[t+4]="",this.array2048[t]="")),this.array2048[t+4]===this.array2048[t]&&""!==this.array2048[t+4]&&(this.array2048[t+4]=(2*Number(this.array2048[t+4])).toString(),this.array2048[t]="")}this.updFields(),this.array2048.toString()===this.previousTurnArray.toString()?(document.addEventListener("keydown",(t=>{this.getKey(t)}),{once:!0}),0===this.array2048.map(((t,e)=>""===t?e:-1)).filter((t=>-1!==t)).length&&0===this.isPossibleMoves()&&this.endGame()):setTimeout((()=>{this.createNumber(),this.previousTurnArray=this.array2048.slice()}),100)}rightKey(){for(let t=0;t<4;t+=1){if(""===this.array2048[4*t]||""===this.array2048[4*t+1]||""===this.array2048[4*t+2]||""===this.array2048[4*t+3]){const e=this.array2048.slice().splice(4*t,4).filter((t=>""!==t));this.array2048[4*t]="",this.array2048[4*t+1]=3===e.length?e[e.length-3]:"",this.array2048[4*t+2]=e.length>=2?e[e.length-2]:"",this.array2048[4*t+3]=e.length>=1?e[e.length-1]:""}this.array2048[4*t+3]===this.array2048[4*t+2]&&(""!==this.array2048[4*t+3]?(this.array2048[4*t+3]=(2*Number(this.array2048[4*t+3])).toString(),this.array2048[4*t+2]=this.array2048[4*t+1],this.array2048[4*t+1]=this.array2048[4*t],this.array2048[4*t]=""):this.array2048[4*t+1]===this.array2048[4*t]?""!==this.array2048[4*t+1]?(this.array2048[4*t+3]=(2*Number(this.array2048[4*t+1])).toString(),this.array2048[4*t+2]="",this.array2048[4*t+1]="",this.array2048[4*t]=""):(this.array2048[4*t+3]="",this.array2048[4*t+2]="",this.array2048[4*t+1]="",this.array2048[4*t]=""):(this.array2048[4*t+3]=this.array2048[4*t+1],this.array2048[4*t+2]=this.array2048[4*t],this.array2048[4*t+1]="",this.array2048[4*t]="")),this.array2048[4*t+2]===this.array2048[4*t+1]&&(""!==this.array2048[4*t+2]?(this.array2048[4*t+2]=(2*Number(this.array2048[4*t+2])).toString(),this.array2048[4*t+1]=this.array2048[4*t],this.array2048[4*t]=""):(this.array2048[4*t+2]=this.array2048[4*t],this.array2048[4*t+1]="",this.array2048[4*t]="")),this.array2048[4*t+1]===this.array2048[4*t]&&""!==this.array2048[4*t+1]&&(this.array2048[4*t+1]=(2*Number(this.array2048[4*t+1])).toString(),this.array2048[4*t]="")}this.updFields(),this.array2048.toString()===this.previousTurnArray.toString()?(document.addEventListener("keydown",(t=>{this.getKey(t)}),{once:!0}),0===this.array2048.map(((t,e)=>""===t?e:-1)).filter((t=>-1!==t)).length&&0===this.isPossibleMoves()&&this.endGame()):setTimeout((()=>{this.createNumber(),this.previousTurnArray=this.array2048.slice()}),100)}upKey(){for(let t=0;t<4;t+=1){if(""===this.array2048[t]||""===this.array2048[t+4]||""===this.array2048[t+8]||""===this.array2048[t+12]){const e=Array.from([this.array2048[t],this.array2048[t+4],this.array2048[t+8],this.array2048[t+12]]).filter((t=>""!==t));this.array2048[t+12]="",this.array2048[t+8]=3===e.length?e[2]:"",this.array2048[t+4]=e.length>=2?e[1]:"",this.array2048[t]=e.length>=1?e[0]:""}this.array2048[t]===this.array2048[t+4]&&(""!==this.array2048[t]?(this.array2048[t]=(2*Number(this.array2048[t])).toString(),this.array2048[t+4]=this.array2048[t+8],this.array2048[t+8]=this.array2048[t+12],this.array2048[t+12]=""):this.array2048[t+8]===this.array2048[t+12]?""!==this.array2048[t+8]?(this.array2048[t]=(2*Number(this.array2048[t+8])).toString(),this.array2048[t+4]="",this.array2048[t+8]="",this.array2048[t+12]=""):(this.array2048[t]="",this.array2048[t+4]="",this.array2048[t+8]="",this.array2048[t+12]=""):(this.array2048[t]=this.array2048[t+8],this.array2048[t+4]=this.array2048[t+12],this.array2048[t+8]="",this.array2048[t+12]="")),this.array2048[t+4]===this.array2048[t+8]&&(""!==this.array2048[t+4]?(this.array2048[t+4]=(2*Number(this.array2048[t+4])).toString(),this.array2048[t+8]=this.array2048[t+12],this.array2048[t+12]=""):(this.array2048[t+4]=this.array2048[t+12],this.array2048[t+8]="",this.array2048[t+12]="")),this.array2048[t+8]===this.array2048[t+12]&&""!==this.array2048[t+8]&&(this.array2048[t+8]=(2*Number(this.array2048[t+8])).toString(),this.array2048[t+12]="")}this.updFields(),this.array2048.toString()===this.previousTurnArray.toString()?(document.addEventListener("keydown",(t=>{this.getKey(t)}),{once:!0}),0===this.array2048.map(((t,e)=>""===t?e:-1)).filter((t=>-1!==t)).length&&0===this.isPossibleMoves()&&this.endGame()):setTimeout((()=>{this.createNumber(),this.previousTurnArray=this.array2048.slice()}),100)}getKey(t){const e=t.keyCode;37==e?this.leftKey():38==e?this.upKey():39==e?this.rightKey():40==e&&this.downKey()}nextTurn(t){document.addEventListener("keydown",(t=>{this.getKey(t)}),{once:!0}),t.sort((()=>Math.random()-.5)),this.array2048[t[0]]=(2*(Math.floor(2*Math.random())+1)).toString(),this.updFields(),-1!==this.array2048.indexOf("2048")&&!1===this.continueAfter2048&&this.get2048(),0===this.isPossibleMoves()&&this.endGame()}createNumber(){const t=this.array2048.map(((t,e)=>""===t?e:-1)).filter((t=>-1!==t));0===t.length&&0===this.isPossibleMoves()?this.endGame():this.nextTurn(t)}isPossibleMoves(){const t=this.array2048.map(((t,e)=>""===t?e:-1)).filter((t=>-1!==t));for(let e=0;e<4;e+=1)if(0!==t.length||this.array2048[4*e]===this.array2048[4*e+1]||this.array2048[4*e+1]===this.array2048[4*e+2]||this.array2048[4*e+2]===this.array2048[4*e+3]||this.array2048[e]===this.array2048[e+4]||this.array2048[e+4]===this.array2048[e+8]||this.array2048[e+8]===this.array2048[e+12])return 1;return 0}after_render(){return i(this,void 0,void 0,(function*(){document.getElementById("start2048").addEventListener("click",this.start2048.bind(this)),document.getElementById("new2048game").addEventListener("click",(()=>window.location.reload())),document.getElementById("new2048game2").addEventListener("click",(()=>window.location.reload()))}))}}},113:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),s(289),e.default=class{constructor(){this.turn=0,this.myField=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]],this.enemyField=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]],this.myShips=[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]]],this.enemyShips=[[[0,0],[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0]],[[0,0],[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]]],this.compStrategy1=[[0,3],[1,2],[2,1],[3,0],[0,7],[1,6],[2,5],[3,4],[4,3],[5,2],[6,1],[7,0],[2,9],[3,8],[4,7],[5,6],[6,5],[7,4],[8,3],[9,2],[6,9],[7,8],[8,7],[9,6]],this.compStrategy2=[[0,3],[1,2],[2,1],[3,0],[0,7],[1,6],[2,5],[3,4],[4,3],[5,2],[6,1],[7,0],[2,9],[3,8],[4,7],[5,6],[6,5],[7,4],[8,3],[9,2],[6,9],[7,8],[8,7],[9,6],[0,1],[1,0],[0,5],[1,4],[2,3],[3,2],[4,1],[5,0],[0,9],[1,8],[2,7],[3,6],[4,5],[5,4],[6,3],[7,2],[8,1],[9,0],[4,9],[5,8],[6,7],[7,6],[8,5],[9,4],[8,9],[9,8]],this.is4Dead=!1,this.is4Bleed=!1,this.is3Dead=!1,this.is3Dead1=!1,this.is3Bleed=!1,this.is2Dead=!1,this.is2Dead1=!1,this.is2Dead2=!1,this.is2Bleed=!1,this.lastShot=[],this.highProbability=[]}render(){return i(this,void 0,void 0,(function*(){let t='<table class="myBattleField" id="myBattleField"><tbody><tr><td></td><td>А</td><td>Б</td><td>В</td><td>Г</td><td>Д</td><td>Е</td><td>Ж</td><td>З</td><td>И</td><td>К</td></tr>',e='<table class="enemyBattleField" id="enemyBattleField"><tbody><tr><td></td><td>А</td><td>Б</td><td>В</td><td>Г</td><td>Д</td><td>Е</td><td>Ж</td><td>З</td><td>И</td><td>К</td></tr>';for(let s=0;s<10;s+=1){t+=`<tr><td>${s+1}</td>`,e+=`<tr><td>${s+1}</td>`;for(let i=0;i<10;i+=1)t+=`<td class="battlecell empty" id="my${s}_${i}"></td>`,e+=`<td class="battlecell empty" id="enemy${s}_${i}"></td>`;t+="</tr>",e+="</tr>"}return t+="</tbody></table>",e+="</tbody></table>",`\n    <div class="battleships_wrapper">\n      <div class="myField">\n        ${t}\n        <div class="battlefield_options">\n          <div class="button" id="randomShips">Случайная расстановка</div>\n          <div class="button" id="notRandomShips">Расставить лично</div>\n          <p id="advice" style="display:none">Нажимайте на ячейки для отрисовки кораблей. <br>Повторное нажатие - удаление.<br>При нажатии на старт при неполном заполнении поля<br> игра начинается со случайной расстановкой.</p>\n          <p></p>\n        </div>\n      </div>\n      <div class="center">\n        <div class="startBattle button" id="startBattleships">Старт</div>\n        <p class="game_result" id="result" style="display: none"></p>\n        <div class="newBattle button" id="newBattleships" style="display:none">Новая Игра</div>\n      </div>\n      <div class="enemyField" style="pointer-events: none">\n        ${e}\n      </div>\n    </div>\n      `}))}RandomShips(){this.myField=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]],document.querySelectorAll(".full").forEach((t=>t.classList.add("empty"))),document.querySelectorAll(".full").forEach((t=>t.classList.remove("full")));const t=["vertical","horizontal"],e=[4,3,3,2,2,2,1,1,1,1];for(let s=0;s<10;s+=1){const i=[],r=[];if("vertical"===t[Math.round(Math.random())]){for(let t=0;t<11-e[s];t+=1)for(let r=0;r<10;r+=1){let n=0;for(let i=0;i<e[s];i+=1)n+=Number(Boolean(this.myField[t+i][r]));0===n&&i.push([t,r])}const t=i[Math.round(Math.random()*(i.length-1))];for(let i=0;i<e[s];i+=1)this.myField[t[0]+i][t[1]]="x",0===i&&t[0]>0&&(this.myField[t[0]+i-1][t[1]]="-",t[1]>0&&(this.myField[t[0]+i-1][t[1]-1]="-"),t[1]<9&&(this.myField[t[0]+i-1][t[1]+1]="-")),i===e[s]-1&&t[0]<10-e[s]&&(this.myField[t[0]+e[s]][t[1]]="-",t[1]>0&&(this.myField[t[0]+e[s]][t[1]-1]="-"),t[1]<9&&(this.myField[t[0]+e[s]][t[1]+1]="-")),t[1]>0&&(this.myField[t[0]+i][t[1]-1]="-"),t[1]<9&&(this.myField[t[0]+i][t[1]+1]="-"),document.getElementById(`my${t[0]+i}_${t[1]}`).classList.remove("empty"),document.getElementById(`my${t[0]+i}_${t[1]}`).classList.add("full"),this.myShips[s][i]=[t[0]+i,t[1]]}else{for(let t=0;t<11-e[s];t+=1)for(let i=0;i<10;i+=1){let n=0;for(let r=0;r<e[s];r+=1)n+=Number(Boolean(this.myField[i][t+r]));0===n&&r.push([i,t])}const t=r[Math.round(Math.random()*(r.length-1))];for(let i=0;i<e[s];i+=1)this.myField[t[0]][t[1]+i]="x",0===i&&t[1]>0&&(this.myField[t[0]][t[1]+i-1]="-",t[0]>0&&(this.myField[t[0]-1][t[1]+i-1]="-"),t[0]<9&&(this.myField[t[0]+1][t[1]+i-1]="-")),i===e[s]-1&&t[1]<10-e[s]&&(this.myField[t[0]][t[1]+e[s]]="-",t[0]>0&&(this.myField[t[0]-1][t[1]+e[s]]="-"),t[0]<9&&(this.myField[t[0]+1][t[1]+e[s]]="-")),t[0]>0&&(this.myField[t[0]-1][t[1]+i]="-"),t[0]<9&&(this.myField[t[0]+1][t[1]+i]="-"),document.getElementById(`my${t[0]}_${t[1]+i}`).classList.remove("empty"),document.getElementById(`my${t[0]}_${t[1]+i}`).classList.add("full"),this.myShips[s][i]=[t[0],t[1]+i]}}}enemyRandomShips(){this.enemyField=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]];const t=["vertical","horizontal"],e=[4,3,3,2,2,2,1,1,1,1];for(let s=0;s<10;s+=1){const i=[],r=[];if("vertical"===t[Math.round(Math.random())]){for(let t=0;t<11-e[s];t+=1)for(let r=0;r<10;r+=1){let n=0;for(let i=0;i<e[s];i+=1)n+=Number(Boolean(this.enemyField[t+i][r]));0===n&&i.push([t,r])}const t=i[Math.round(Math.random()*(i.length-1))];for(let i=0;i<e[s];i+=1)this.enemyField[t[0]+i][t[1]]="x",0===i&&t[0]>0&&(this.enemyField[t[0]+i-1][t[1]]="-",t[1]>0&&(this.enemyField[t[0]+i-1][t[1]-1]="-"),t[1]<9&&(this.enemyField[t[0]+i-1][t[1]+1]="-")),i===e[s]-1&&t[0]<10-e[s]&&(this.enemyField[t[0]+e[s]][t[1]]="-",t[1]>0&&(this.enemyField[t[0]+e[s]][t[1]-1]="-"),t[1]<9&&(this.enemyField[t[0]+e[s]][t[1]+1]="-")),t[1]>0&&(this.enemyField[t[0]+i][t[1]-1]="-"),t[1]<9&&(this.enemyField[t[0]+i][t[1]+1]="-"),this.enemyShips[s][i]=[t[0]+i,t[1]]}else{for(let t=0;t<11-e[s];t+=1)for(let i=0;i<10;i+=1){let n=0;for(let r=0;r<e[s];r+=1)n+=Number(Boolean(this.enemyField[i][t+r]));0===n&&r.push([i,t])}const t=r[Math.round(Math.random()*(r.length-1))];for(let i=0;i<e[s];i+=1)this.enemyField[t[0]][t[1]+i]="x",0===i&&t[1]>0&&(this.enemyField[t[0]][t[1]+i-1]="-",t[0]>0&&(this.enemyField[t[0]-1][t[1]+i-1]="-"),t[0]<9&&(this.enemyField[t[0]+1][t[1]+i-1]="-")),i===e[s]-1&&t[1]<10-e[s]&&(this.enemyField[t[0]][t[1]+e[s]]="-",t[0]>0&&(this.enemyField[t[0]-1][t[1]+e[s]]="-"),t[0]<9&&(this.enemyField[t[0]+1][t[1]+e[s]]="-")),t[0]>0&&(this.enemyField[t[0]-1][t[1]+i]="-"),t[0]<9&&(this.enemyField[t[0]+1][t[1]+i]="-"),this.enemyShips[s][i]=[t[0],t[1]+i]}}}checkMyField(){for(let t=0;t<10;t+=1)for(let e=0;e<10;e+=1)if("x"===this.myField[t][e])return!0;return!1}checkMyFieldBeforeStart(){const t=[];for(let e=0;e<10;e+=1)for(let s=0;s<10;s+=1)"x"===this.myField[e][s]&&t.push(Number(e.toString()+s.toString()));const e=[],s=[],i=[],r=[],n=t;for(let r=0;r<t.length;r+=1)t[r]+1===t[r+1]&&t[r+1]+1===t[r+2]&&t[r+2]+1===t[r+3]&&Math.floor(t[r]/10)===Math.floor(t[r+3]/10)?e.push(t[r],t[r]+1,t[r]+2,t[r]+3):-1!==t.indexOf(t[r]+10)&&-1!==t.indexOf(t[r]+20)&&-1!==t.indexOf(t[r]+30)?e.push(t[r],t[r]+10,t[r]+20,t[r]+30):t[r]+1===t[r+1]&&t[r+1]+1===t[r+2]&&Math.floor(t[r]/10)===Math.floor(t[r+2]/10)?s.push(t[r],t[r]+1,t[r]+2):-1!==t.indexOf(t[r]+10)&&-1!==t.indexOf(t[r]+20)?s.push(t[r],t[r]+10,t[r]+20):t[r]+1===t[r+1]&&Math.floor(t[r]/10)===Math.floor(t[r+1]/10)?i.push(t[r],t[r]+1):-1!==t.indexOf(t[r]+10)&&i.push(t[r],t[r]+10);const a=e,o=s.filter((t=>!new Set(a).has(t))),h=i.filter((t=>!new Set(o).has(t))).filter((t=>!new Set(a).has(t))),l=n.filter((t=>!new Set(h).has(t))).filter((t=>!new Set(o).has(t))).filter((t=>!new Set(a).has(t)));for(let t=0;t<l.length;t+=1)this.myShips[6+t][0]=l[t]>9?l[t].toString().split("").map((t=>Number(t))):[0,l[t]],r.push(l[t]-10,l[t]+10),l[t]%10>0&&r.push(l[t]-1,l[t]-11,l[t]+9),l[t]%10<9&&r.push(l[t]+1,l[t]+11,l[t]-9);for(let t=0;t<h.length;t+=2)this.myShips[3+t/2][0]=h[t]>9?h[t].toString().split("").map((t=>Number(t))):[0,h[t]],this.myShips[3+t/2][1]=h[t+1]>9?h[t+1].toString().split("").map((t=>Number(t))):[0,h[t+1]],h[t]+1===h[t+1]?(r.push(h[t]-10,h[t]-9),r.push(h[t]+10,h[t]+11),h[t]%10>0&&r.push(h[t]-11,h[t]-1,h[t]+9),h[t]%10<8&&r.push(h[t]-8,h[t]+2,h[t]+12)):(r.push(h[t]-10,h[t]+20),h[t]%10>0&&r.push(h[t]-11,h[t]-1,h[t]+9,h[t]+19),h[t]%10<9&&r.push(h[t]-9,h[t]+1,h[t]+11,h[t]+21));for(let t=0;t<o.length;t+=3)this.myShips[1+t/3][0]=o[t]>9?o[t].toString().split("").map((t=>Number(t))):[0,o[t]],this.myShips[1+t/3][1]=o[t+1]>9?o[t+1].toString().split("").map((t=>Number(t))):[0,o[t+1]],this.myShips[1+t/3][2]=o[t+2]>9?o[t+2].toString().split("").map((t=>Number(t))):[0,o[t+2]],o[t]+1===o[t+1]&&o[t+1]+1===o[t+2]?(r.push(o[t]-10,o[t]-9,o[t]-8),r.push(o[t]+10,o[t]+11,o[t]+12),o[t]%10>0&&r.push(o[t]-11,o[t]-1,o[t]+9),o[t]%10<7&&r.push(o[t]-7,o[t]+3,o[t]+13)):(r.push(o[t]-10,o[t]+30),o[t]%10>0&&r.push(o[t]-11,o[t]-1,o[t]+9,o[t]+19,o[t]+29),o[t]%10<9&&r.push(o[t]-9,o[t]+1,o[t]+11,o[t]+21,o[t]+31));for(let t=0;t<a.length;t+=4)this.myShips[0][0]=a[t]>9?a[t].toString().split("").map((t=>Number(t))):[0,a[t]],this.myShips[0][1]=a[t+1]>9?a[t+1].toString().split("").map((t=>Number(t))):[0,a[t+1]],this.myShips[0][2]=a[t+2]>9?a[t+2].toString().split("").map((t=>Number(t))):[0,a[t+2]],this.myShips[0][3]=a[t+3]>9?a[t+3].toString().split("").map((t=>Number(t))):[0,a[t+3]],a[t]+1===a[t+1]&&a[t+1]+1===a[t+2]&&a[t+2]+1===a[t+3]?(r.push(a[t]-10,a[t]-9,a[t]-8,a[t]-7),r.push(a[t]+10,a[t]+11,a[t]+12,a[t]+13),a[t]%10>0&&r.push(a[t]-11,a[t]-1,a[t]+9),a[t]%10<6&&r.push(a[t]-6,a[t]+4,a[t]+14)):(r.push(a[t]-10,a[t]+40),a[t]%10>0&&r.push(a[t]-11,a[t]-1,a[t]+9,a[t]+19,a[t]+29,a[t]+39),a[t]%10<9&&r.push(a[t]-9,a[t]+1,a[t]+11,a[t]+21,a[t]+31,a[t]+41));const d=[...e,...o,...h,...l,...r];return Array.from(new Set(d)).length-Array.from(new Set(r)).length==20&&4===a.length&&6===o.length&&6===h.length&&4===l.length}checkEnemyField(){for(let t=0;t<10;t+=1)for(let e=0;e<10;e+=1)if("x"===this.enemyField[t][e])return!0;return!1}startBattle(){this.checkMyFieldBeforeStart()||this.RandomShips(),document.querySelector(".battlefield_options").setAttribute("style","display: none"),document.getElementById("startBattleships").setAttribute("style","display: none"),this.enemyRandomShips(),this.addListeners(),this.shot()}addListeners(){document.getElementById("enemyBattleField").querySelectorAll(".empty").forEach((t=>t.addEventListener("click",(t=>{this.getShotResult(t)}),{once:!0})))}addListenersforMyField(){document.getElementById("myBattleField").querySelectorAll(".empty").forEach((t=>t.addEventListener("click",(t=>{this.paintBoats(t)}))))}paintBoats(t){const e=t.target.id.split("my")[1].split("_").map((t=>Number(t))),s=document.getElementById(`my${e[0]}_${e[1]}`);"x"===this.myField[e[0]][e[1]]?(this.myField[e[0]][e[1]]="",s.classList.remove("full"),s.classList.add("empty")):(this.myField[e[0]][e[1]]="x",s.classList.remove("empty"),s.classList.add("full"))}getShotResult(t){const e=t.target.id.split("enemy")[1].split("_").map((t=>Number(t))),s=document.getElementById(`enemy${e[0]}_${e[1]}`);"x"===this.enemyField[e[0]][e[1]]?(this.enemyField[e[0]][e[1]]="o",s.classList.remove("empty"),s.classList.add("full"),s.classList.add("fire"),this.isAlive([e[0],e[1]])||this.bombAroundDead([e[0],e[1]]),this.checkEnemyField()||this.endGame("me")):(s.classList.remove("empty"),s.classList.add("miss"),this.turn=1,this.shot(),this.checkMyField()||this.endGame("comp"))}shot(){0===this.turn?(document.getElementById("enemyBattleField").setAttribute("style","pointer-events: auto"),this.turn=1):(document.getElementById("enemyBattleField").setAttribute("style","pointer-events: none"),this.compShot(),this.turn=0)}compShot(){let t,e,s=[];const i=[];if(0!==this.lastShot.length)if(this.highProbability=[],this.lastShot.length>1){if(this.lastShot[0][0]===this.lastShot[1][0]){const t=[];for(let e=0;e<this.lastShot.length;e+=1)t.push(this.lastShot[e][1]);Math.min(...t)>0&&(document.getElementById(`my${this.lastShot[0][0]}_${Math.min(...t)-1}`).classList.contains("miss")||document.getElementById(`my${this.lastShot[0][0]}_${Math.min(...t)-1}`).classList.contains("fire")||this.highProbability.push([this.lastShot[0][0],Math.min(...t)-1])),Math.max(...t)<9&&(document.getElementById(`my${this.lastShot[0][0]}_${Math.max(...t)+1}`).classList.contains("miss")||document.getElementById(`my${this.lastShot[0][0]}_${Math.max(...t)+1}`).classList.contains("fire")||this.highProbability.push([this.lastShot[0][0],Math.max(...t)+1]))}else if(this.lastShot[0][1]===this.lastShot[1][1]){const t=[];for(let e=0;e<this.lastShot.length;e+=1)t.push(this.lastShot[e][0]);Math.min(...t)>0&&(document.getElementById(`my${Math.min(...t)-1}_${this.lastShot[0][1]}`).classList.contains("miss")||document.getElementById(`my${Math.min(...t)-1}_${this.lastShot[0][1]}`).classList.contains("fire")||this.highProbability.push([Math.min(...t)-1,this.lastShot[0][1]])),Math.max(...t)<9&&(document.getElementById(`my${Math.max(...t)+1}_${this.lastShot[0][1]}`).classList.contains("miss")||document.getElementById(`my${Math.max(...t)+1}_${this.lastShot[0][1]}`).classList.contains("fire")||this.highProbability.push([Math.max(...t)+1,this.lastShot[0][1]]))}e=Math.round(Math.random()*(this.highProbability.length-1)),s=this.highProbability[e],t=document.getElementById(`my${s[0]}_${s[1]}`)}else this.lastShot[0][0]>0&&(document.getElementById(`my${this.lastShot[0][0]-1}_${this.lastShot[0][1]}`).classList.contains("miss")||document.getElementById(`my${this.lastShot[0][0]-1}_${this.lastShot[0][1]}`).classList.contains("fire")||i.push([this.lastShot[0][0]-1,this.lastShot[0][1]])),this.lastShot[0][0]<9&&(document.getElementById(`my${this.lastShot[0][0]+1}_${this.lastShot[0][1]}`).classList.contains("miss")||document.getElementById(`my${this.lastShot[0][0]+1}_${this.lastShot[0][1]}`).classList.contains("fire")||i.push([this.lastShot[0][0]+1,this.lastShot[0][1]])),this.lastShot[0][1]>0&&(document.getElementById(`my${this.lastShot[0][0]}_${this.lastShot[0][1]-1}`).classList.contains("miss")||document.getElementById(`my${this.lastShot[0][0]}_${this.lastShot[0][1]-1}`).classList.contains("fire")||i.push([this.lastShot[0][0],this.lastShot[0][1]-1])),this.lastShot[0][1]<9&&(document.getElementById(`my${this.lastShot[0][0]}_${this.lastShot[0][1]+1}`).classList.contains("miss")||document.getElementById(`my${this.lastShot[0][0]}_${this.lastShot[0][1]+1}`).classList.contains("fire")||i.push([this.lastShot[0][0],this.lastShot[0][1]+1])),e=Math.round(Math.random()*(i.length-1)),s=i[e],t=document.getElementById(`my${s[0]}_${s[1]}`);else if(this.is4Dead||this.is4Bleed)if(this.is3Dead||this.is3Bleed)if(this.is2Dead||this.is2Bleed){const i=this.getAllMyPossibleCells();e=Math.round(Math.random()*(i.length-1)),s=i[e],t=document.getElementById(`my${s[0]}_${s[1]}`)}else e=Math.round(Math.random()*(this.compStrategy2.length-1)),s=this.compStrategy2[e],e<=this.compStrategy1.length&&this.compStrategy1.splice(e,1),t=document.getElementById(`my${s[0]}_${s[1]}`);else e=Math.round(Math.random()*(this.compStrategy2.length-1)),s=this.compStrategy2[e],e<=this.compStrategy1.length&&this.compStrategy1.splice(e,1),t=document.getElementById(`my${s[0]}_${s[1]}`);else e=Math.round(Math.random()*(this.compStrategy1.length-1)),s=this.compStrategy1[e],t=document.getElementById(`my${s[0]}_${s[1]}`);let r=-5;for(let t=0;t<this.compStrategy1.length;t+=1)s[0]===this.compStrategy1[t][0]&&s[1]===this.compStrategy1[t][1]&&(r=t,r>=0&&this.compStrategy1.splice(r,1));for(let t=0;t<this.compStrategy2.length;t+=1)s[0]===this.compStrategy2[t][0]&&s[1]===this.compStrategy2[t][1]&&(r=t,r>=0&&this.compStrategy2.splice(r,1));if("x"===this.myField[s[0]][s[1]]){this.myField[s[0]][s[1]]="o",t.classList.remove("empty"),t.classList.remove("miss"),t.classList.add("full"),t.classList.add("fire");const e=this.isMyAlive([s[0],s[1]]),i=this.getMyBoatNumber([s[0],s[1]]);e?(0===i?this.is4Bleed=!0:i<3?this.is3Bleed=!0:i<6&&(this.is2Bleed=!0),this.lastShot.unshift(s)):(0===i?this.is4Dead=!0:i<3&&this.is3Dead1?this.is3Dead=!0:i<3?this.is3Dead1=!0:i<6&&this.is2Dead2?this.is2Dead=!0:i<6&&this.is2Dead1?this.is2Dead2=!0:i<6&&(this.is2Dead1=!0),this.bombAroundMyDead([s[0],s[1]]),this.lastShot=[],this.highProbability=[],0===i?this.is4Bleed=!1:i<3?this.is3Bleed=!1:i<6&&(this.is2Bleed=!1)),this.checkMyField()||this.endGame("comp"),setTimeout((()=>{this.compShot()}),500)}else this.myField[s[0]][s[1]]="*",t.classList.remove("empty"),t.classList.add("miss"),this.turn=0,this.shot()}getEnemyBoatNumber([t,e]){for(let s=0;s<10;s+=1)for(let i=0;i<this.enemyShips[s].length;i+=1)if(this.enemyShips[s][i][0]===t&&this.enemyShips[s][i][1]===e)return s;return 999}getMyBoatNumber([t,e]){for(let s=0;s<10;s+=1)for(let i=0;i<this.myShips[s].length;i+=1)if(this.myShips[s][i][0]===t&&this.myShips[s][i][1]===e)return s;return 999}isAlive([t,e]){const s=this.getEnemyBoatNumber([t,e]);for(let t=0;t<this.enemyShips[s].length;t+=1)if("x"===this.enemyField[this.enemyShips[s][t][0]][this.enemyShips[s][t][1]])return!0;return!1}isMyAlive([t,e]){const s=this.getMyBoatNumber([t,e]);for(let t=0;t<this.myShips[s].length;t+=1)if("x"===this.myField[this.myShips[s][t][0]][this.myShips[s][t][1]])return!0;return!1}bombAroundDead([t,e]){const s=[],i=[];for(let r=0;r<10;r+=1)for(let n=0;n<this.enemyShips[r].length;n+=1)if(this.enemyShips[r][n][0]===t&&this.enemyShips[r][n][1]===e)for(let t=0;t<this.enemyShips[r].length;t+=1)s.push((this.enemyShips[r][t][0]-1).toString()+this.enemyShips[r][t][1].toString()),s.push((this.enemyShips[r][t][0]-1).toString()+(this.enemyShips[r][t][1]-1).toString()),s.push((this.enemyShips[r][t][0]-1).toString()+(this.enemyShips[r][t][1]+1).toString()),s.push(this.enemyShips[r][t][0].toString()+(this.enemyShips[r][t][1]-1).toString()),s.push(this.enemyShips[r][t][0].toString()+(this.enemyShips[r][t][1]+1).toString()),s.push((this.enemyShips[r][t][0]+1).toString()+this.enemyShips[r][t][1].toString()),s.push((this.enemyShips[r][t][0]+1).toString()+(this.enemyShips[r][t][1]-1).toString()),s.push((this.enemyShips[r][t][0]+1).toString()+(this.enemyShips[r][t][1]+1).toString()),i.push(this.enemyShips[r][t][0].toString()+this.enemyShips[r][t][1].toString());const r=s.filter((t=>t.split("").length<3)).filter((t=>!t.includes("-"))),n=Array.from(new Set(r)).filter((t=>!new Set(i).has(t)));for(let t=0;t<n.length;t+=1){const e=document.getElementById(`enemy${n[t].split("")[0]}_${n[t].split("")[1]}`);e.classList.remove("empty"),e.classList.add("miss"),e.replaceWith(e.cloneNode(!0))}}bombAroundMyDead([t,e]){const s=[],i=[];for(let r=0;r<10;r+=1)for(let n=0;n<this.myShips[r].length;n+=1)if(this.myShips[r][n][0]===t&&this.myShips[r][n][1]===e)for(let t=0;t<this.myShips[r].length;t+=1)s.push((this.myShips[r][t][0]-1).toString()+this.myShips[r][t][1].toString()),s.push((this.myShips[r][t][0]-1).toString()+(this.myShips[r][t][1]-1).toString()),s.push((this.myShips[r][t][0]-1).toString()+(this.myShips[r][t][1]+1).toString()),s.push(this.myShips[r][t][0].toString()+(this.myShips[r][t][1]-1).toString()),s.push(this.myShips[r][t][0].toString()+(this.myShips[r][t][1]+1).toString()),s.push((this.myShips[r][t][0]+1).toString()+this.myShips[r][t][1].toString()),s.push((this.myShips[r][t][0]+1).toString()+(this.myShips[r][t][1]-1).toString()),s.push((this.myShips[r][t][0]+1).toString()+(this.myShips[r][t][1]+1).toString()),i.push(this.myShips[r][t][0].toString()+this.myShips[r][t][1].toString());const r=s.filter((t=>t.split("").length<3)).filter((t=>!t.includes("-"))),n=Array.from(new Set(r)).filter((t=>!new Set(i).has(t)));for(let t=0;t<n.length;t+=1){const e=document.getElementById(`my${n[t].split("")[0]}_${n[t].split("")[1]}`);this.myField[n[t].split("")[0]][n[t].split("")[1]]="*",e.classList.remove("empty"),e.classList.add("miss");let s=-5;for(let e=0;e<this.compStrategy1.length;e+=1)Number(n[t].split("")[0])===this.compStrategy1[e][0]&&Number(n[t].split("")[1])===this.compStrategy1[e][1]&&(s=e,s>=0&&this.compStrategy1.splice(s,1));for(let e=0;e<this.compStrategy2.length;e+=1)Number(n[t].split("")[0])===this.compStrategy2[e][0]&&Number(n[t].split("")[1])===this.compStrategy2[e][1]&&(s=e,s>=0&&this.compStrategy2.splice(s,1));e.replaceWith(e.cloneNode(!0))}}getAllMyPossibleCells(){const t=[];for(let e=0;e<this.myField.length;e+=1)for(let s=0;s<this.myField[e].length;s+=1)"o"!==this.myField[e][s]&&"*"!==this.myField[e][s]&&t.push([e,s]);return t}endGame(t){document.getElementById("result").setAttribute("style","display:block");const e="me"===t?"Вы победили!":"Ваш противник победил!";document.getElementById("result").innerHTML=`Игра окончена.<br>${e}`,document.getElementById("newBattleships").setAttribute("style","display:flex")}notRandomShips(){this.myField=[["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""],["","","","","","","","","",""]],document.querySelectorAll(".full").forEach((t=>t.classList.add("empty"))),document.querySelectorAll(".full").forEach((t=>t.classList.remove("full"))),document.getElementById("advice").setAttribute("style","display:block"),document.getElementById("randomShips").setAttribute("style","display:none"),document.getElementById("notRandomShips").setAttribute("style","display:none"),this.addListenersforMyField()}after_render(){return i(this,void 0,void 0,(function*(){document.getElementById("randomShips").addEventListener("click",this.RandomShips.bind(this)),document.getElementById("notRandomShips").addEventListener("click",this.notRandomShips.bind(this)),document.getElementById("startBattleships").addEventListener("click",this.startBattle.bind(this)),document.getElementById("newBattleships").addEventListener("click",(()=>window.location.reload()))}))}}},730:function(t,e){var s=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{render(){return s(this,void 0,void 0,(function*(){return'\n        <section class="section">\n            <h1> 404 Error </h1>\n        </section>\n    '}))}after_render(){return s(this,void 0,void 0,(function*(){}))}}},103:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),s(972),e.default=class{render(){return i(this,void 0,void 0,(function*(){return'\n  <section class="promo">\n    <div class="wrapper promo__wrapper">\n      <h2 class="promo__title">Андрей учит TypeScript</h2>\n    </div>\n  </section>\n    '}))}after_render(){return i(this,void 0,void 0,(function*(){}))}}},843:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),s(177),e.default=class{constructor(){this.players=Number(localStorage.getItem("nine-players")),this.cardsCount=Number(localStorage.getItem("nine-gameType")),this.allCards=52===this.cardsCount?Array.from(Array(this.cardsCount).keys()).sort((()=>Math.random()-.5)):Array.from(Array(9).keys()).map(((t,e)=>4+e)).concat(Array.from(Array(9).keys()).map(((t,e)=>17+e))).concat(Array.from(Array(9).keys()).map(((t,e)=>30+e))).concat(Array.from(Array(9).keys()).map(((t,e)=>43+e))).sort((()=>Math.random()-.5)),this.bot1Cards=this.players>1?this.allCards.splice(0,Math.floor(this.cardsCount/this.players)+(this.players>=5?1:0)):[],this.bot2Cards=this.players>2?this.allCards.splice(0,Math.floor(this.cardsCount/this.players)+(this.players>=6?1:0)):[],this.bot3Cards=this.players>3?this.allCards.splice(0,Math.floor(this.cardsCount/this.players)+(this.players>=6?1:0)):[],this.bot4Cards=this.players>4?this.allCards.splice(0,Math.floor(this.cardsCount/this.players)):[],this.bot5Cards=this.players>5?this.allCards.splice(0,Math.floor(this.cardsCount/this.players)):[],this.playerCards=this.allCards.sort(((t,e)=>t-e)),this.cardsOnBoard1=[],this.cardsOnBoard2=[],this.cardsOnBoard3=[],this.cardsOnBoard4=[],this.currentPlayer=-1!==this.bot1Cards.indexOf(33)?1:-1!==this.bot2Cards.indexOf(33)?2:-1!==this.bot3Cards.indexOf(33)?3:-1!==this.bot4Cards.indexOf(33)?4:-1!==this.bot5Cards.indexOf(33)?5:0,this.mainWidth=document.body.clientWidth-40,this.cardWidth=.7*this.mainWidth/14,this.cardHeight=this.cardWidth/500*726,this.currentPlayerPossibleMoves=[]}render(){return i(this,void 0,void 0,(function*(){const t="start"===window.location.hash.split("/")[2]?0:"field"===window.location.hash.split("/")[2]?1:2,e=`\n    <div class="enemies">\n      <div class="enemy enemy-1" style="display:${this.players<2?"none":"flex"}">\n        <span>Bot 1</span>\n        <div class="bot-cards">${this.bot1Cards.length}</div>\n      </div>\n      <div class="enemy enemy-2" style="display:${this.players<3?"none":"flex"}">\n        <span>Bot 2</span>\n        <div class="bot-cards">${this.bot2Cards.length}</div>\n      </div>\n      <div class="enemy enemy-3" style="display:${this.players<4?"none":"flex"}">\n        <span>Bot 3</span>\n        <div class="bot-cards">${this.bot3Cards.length}</div>\n      </div>\n      <div class="enemy enemy-4" style="display:${this.players<5?"none":"flex"}">\n        <span>Bot 4</span>\n        <div class="bot-cards">${this.bot4Cards.length}</div>\n      </div>\n      <div class="enemy enemy-5" style="display:${this.players<6?"none":"flex"}">\n        <span>Bot 5</span>\n        <div class="bot-cards">${this.bot5Cards.length}</div>\n      </div>\n    </div>\n    `;let s="",i="",r="",n="",a="";for(let t=0;t<this.playerCards.length;t+=1)a+=`<div class="nine-card-my photo${this.playerCards[t]}" style="width: ${.8*this.mainWidth/18}px" id="myCard${this.playerCards[t]}"></div>`;for(let t=0;t<this.cardsCount/4;t+=1)s+=`<div class="nine-card" style="width: ${this.cardWidth}px; height: ${this.cardHeight}px" id="card${52===this.cardsCount?t:t+4}"></div>`,i+=`<div class="nine-card" style="width: ${this.cardWidth}px; height: ${this.cardHeight}px" id="card${52===this.cardsCount?t+this.cardsCount/4:t+this.cardsCount/4+8}"></div>`,r+=`<div class="nine-card" style="width: ${this.cardWidth}px; height: ${this.cardHeight}px" id="card${52===this.cardsCount?t+2*this.cardsCount/4:t+2*this.cardsCount/4+12}"></div>`,n+=`<div class="nine-card" style="width: ${this.cardWidth}px; height: ${this.cardHeight}px" id="card${52===this.cardsCount?t+3*this.cardsCount/4:t+3*this.cardsCount/4+16}"></div>`;return`\n    <div class="nine-navigation" style="display:${1===t?"none":"flex"}">\n      <div class="wrapper nine-navigation__wrapper">\n        <div class="navigation-buttons">\n          <a href="#/nine/start" class="${2!==t?"button":"button_grey"} textbook__button">Game Start</a>\n          <a href="#/nine/info" class="${2===t?"button":"button_grey"} textbook__button">Game rules</a>\n        </div>\n      </div>\n    </div>\n    <section class="word-cards">\n      ${2===t?'\n    <section class="nine-rules" style="background:red; color:black">\n      <a href="#/nine/start" class="level-info-link">\n        <div class="level-description">\n          <p>Карточная игра "Девятка"</p>\n          <p>Число игроков: от 2 до до 6</p>\n          <p>Цель игры: избавиться от карт на руках. Проигрывает тот, кто последний останется с картами</p>\n          <p>Игру начинает игрок, имеющий 9 бубен. \n          Следующий игрок по часовой стрелке может положить 8 или 10 бубен, либо одну из трёх оставшихся 9. \n          Если вышеназванных карт у него нет, то он пропускает ход, а при игре на деньги обязан поставить в банк определенную сумму, \n          обычно равную начальной ставке. \n          Также и в дальнейшем: при невозможности положить карту ход пропускается. \n          Но игрок обязан выложить карту на кон, если он может сделать ход.</p>\n        </div>\n      </a>\n    </section>\n    ':1===t?`\n      ${e}\n      <div class="battlefield">\n        <div class="battlefield-row">${s}</div>\n        <div class="battlefield-row">${i}</div>\n        <div class="battlefield-row">${r}</div>\n        <div class="battlefield-row">${n}</div>\n      </div>\n      <div class="myCards" style="pointer-events:none">${a}</div>\n      <div class="nine-result" style="display:none">\n        <p class="nine-winner">Winner:</p>\n        <a href="#/nine/start" class="button">New game</a>\n      </div>\n    `:'\n    <div class="nine__wrapper">\n      <div class="nine-settings">\n        <div class="nine-setting-item">\n          <p class="form_title">Количество игроков</p>\n          <select class="nine-setting-select" id="nine-level">\n            <option value="3" selected>3</option>\n            <option value="4">4</option>\n            <option value="5">5</option>\n            <option value="6">6</option>\n          </select>\n        </div>\n        <div class="nine-setting-item">\n          <p class="form_title">Выберите формат</p>\n          <select class="nine-setting-select" id="nine-type">\n            <option value="36" selected>36 карт</option>\n            <option value="52">52 карты</option>\n          </select>\n        </div>\n        \x3c!--<div class="nine-setting-item">\n          <p class="form_title" id="currentBet">Текущая ставка: 0</p>\n          <input id="range" type="range" name="range" min="0" max="100" step="5" value="0" />\n        </div>--\x3e\n      </div>\n      <a href="#/nine/field" class="button nine-start">Start</a>\n    </div>\n    '}\n    </section>\n      `}))}startNine(){0===this.currentPlayer?(document.getElementById("myCard33").remove(),this.playerCards.splice(this.playerCards.indexOf(33),1),this.currentPlayer=this.currentPlayer==this.players-1?0:1):1===this.currentPlayer?(this.bot1Cards.splice(this.bot1Cards.indexOf(33),1),document.querySelectorAll(".bot-cards")[0].innerText=`${this.bot1Cards.length}`,this.currentPlayer=this.currentPlayer==this.players-1?0:2):2===this.currentPlayer?(this.bot2Cards.splice(this.bot2Cards.indexOf(33),1),document.querySelectorAll(".bot-cards")[1].innerText=`${this.bot2Cards.length}`,this.currentPlayer=this.currentPlayer==this.players-1?0:3):3===this.currentPlayer?(this.bot3Cards.splice(this.bot3Cards.indexOf(33),1),document.querySelectorAll(".bot-cards")[2].innerText=`${this.bot3Cards.length}`,this.currentPlayer=this.currentPlayer==this.players-1?0:4):4===this.currentPlayer?(this.bot4Cards.splice(this.bot4Cards.indexOf(33),1),document.querySelectorAll(".bot-cards")[3].innerText=`${this.bot4Cards.length}`,this.currentPlayer=this.currentPlayer==this.players-1?0:5):(this.bot5Cards.splice(this.bot5Cards.indexOf(33),1),document.querySelectorAll(".bot-cards")[4].innerText=`${this.bot5Cards.length}`,this.currentPlayer=0),this.cardsOnBoard3.push(33),document.getElementById("card33").setAttribute("class","photo33"),setTimeout((()=>{this.moveNine(this.currentPlayer)}),500)}moveNine(t){this.currentPlayerPossibleMoves=[];const e=0===this.cardsOnBoard1.length?7:Math.min(...this.cardsOnBoard1),s=0===this.cardsOnBoard1.length?7:Math.max(...this.cardsOnBoard1),i=0===this.cardsOnBoard2.length?20:Math.min(...this.cardsOnBoard2),r=0===this.cardsOnBoard2.length?20:Math.max(...this.cardsOnBoard2),n=0===this.cardsOnBoard3.length?33:Math.min(...this.cardsOnBoard3),a=0===this.cardsOnBoard3.length?33:Math.max(...this.cardsOnBoard3),o=0===this.cardsOnBoard4.length?46:Math.min(...this.cardsOnBoard4),h=0===this.cardsOnBoard4.length?46:Math.max(...this.cardsOnBoard4);if(0===this.cardsOnBoard1.length?this.currentPlayerPossibleMoves.push(7):(e>0&&this.currentPlayerPossibleMoves.push(e-1),s<12&&this.currentPlayerPossibleMoves.push(s+1)),0===this.cardsOnBoard2.length?this.currentPlayerPossibleMoves.push(20):(i>13&&this.currentPlayerPossibleMoves.push(i-1),r<25&&this.currentPlayerPossibleMoves.push(r+1)),0===this.cardsOnBoard3.length?this.currentPlayerPossibleMoves.push(33):(n>26&&this.currentPlayerPossibleMoves.push(n-1),a<38&&this.currentPlayerPossibleMoves.push(a+1)),0===this.cardsOnBoard4.length?this.currentPlayerPossibleMoves.push(46):(o>39&&this.currentPlayerPossibleMoves.push(o-1),h<51&&this.currentPlayerPossibleMoves.push(h+1)),0===t)if([...this.currentPlayerPossibleMoves].filter((t=>this.playerCards.includes(t))).length>0){document.querySelector(".myCards").setAttribute("style",'pointer-events:""');for(let t=0;t<this.currentPlayerPossibleMoves.length;t+=1)-1!==this.playerCards.indexOf(this.currentPlayerPossibleMoves[t])&&(document.getElementById(`myCard${this.currentPlayerPossibleMoves[t]}`).style.border="4px solid green",document.getElementById(`myCard${this.currentPlayerPossibleMoves[t]}`).addEventListener("click",(t=>{this.playerMove(t)})))}else if(this.currentPlayer=1,0===this.bot1Cards.length||0===this.bot2Cards.length||0===this.playerCards.length||this.players>3&&0===this.bot3Cards.length||this.players>4&&0===this.bot4Cards.length||this.players>5&&0===this.bot5Cards.length){const t=0===this.playerCards.length?"You! Congratulations!":0===this.bot1Cards.length?"Bot1":0===this.bot2Cards.length?"Bot2":0===this.bot3Cards.length?"Bot3":0===this.bot4Cards.length?"Bot4":"Bot5";document.querySelector(".nine-result").setAttribute("style","display: block"),document.querySelector(".nine-winner").innerText=`Winner: ${t}`}else setTimeout((()=>{this.moveNine(this.currentPlayer)}),500);else if(1===t){const t=[...this.currentPlayerPossibleMoves].filter((t=>this.bot1Cards.includes(t)));if(t.length>0&&(t.sort((()=>Math.random()-.5)),this.bot1Cards.splice(this.bot1Cards.indexOf(t[0]),1),document.querySelectorAll(".bot-cards")[0].innerText=`${this.bot1Cards.length}`,document.getElementById(`card${t[0]}`).setAttribute("class",`photo${t[0]}`),t[0]>=39?this.cardsOnBoard4.push(t[0]):t[0]>=26?this.cardsOnBoard3.push(t[0]):t[0]>=13?this.cardsOnBoard2.push(t[0]):t[0]>=0&&this.cardsOnBoard1.push(t[0])),this.currentPlayer=this.currentPlayer==this.players-1?0:2,0===this.bot1Cards.length||0===this.bot2Cards.length||0===this.playerCards.length||this.players>3&&0===this.bot3Cards.length||this.players>4&&0===this.bot4Cards.length||this.players>5&&0===this.bot5Cards.length){const t=0===this.playerCards.length?"You! Congratulations!":0===this.bot1Cards.length?"Bot1":0===this.bot2Cards.length?"Bot2":0===this.bot3Cards.length?"Bot3":0===this.bot4Cards.length?"Bot4":"Bot5";document.querySelector(".nine-result").setAttribute("style","display: block"),document.querySelector(".nine-winner").innerText=`Winner: ${t}`}else setTimeout((()=>{this.moveNine(this.currentPlayer)}),500)}else if(2===t){const t=[...this.currentPlayerPossibleMoves].filter((t=>this.bot2Cards.includes(t)));if(t.length>0&&(t.sort((()=>Math.random()-.5)),this.bot2Cards.splice(this.bot2Cards.indexOf(t[0]),1),document.querySelectorAll(".bot-cards")[1].innerText=`${this.bot2Cards.length}`,document.getElementById(`card${t[0]}`).setAttribute("class",`photo${t[0]}`),t[0]>=39?this.cardsOnBoard4.push(t[0]):t[0]>=26?this.cardsOnBoard3.push(t[0]):t[0]>=13?this.cardsOnBoard2.push(t[0]):t[0]>=0&&this.cardsOnBoard1.push(t[0])),this.currentPlayer=this.currentPlayer==this.players-1?0:3,0===this.bot1Cards.length||0===this.bot2Cards.length||0===this.playerCards.length||this.players>3&&0===this.bot3Cards.length||this.players>4&&0===this.bot4Cards.length||this.players>5&&0===this.bot5Cards.length){const t=0===this.playerCards.length?"You! Congratulations!":0===this.bot1Cards.length?"Bot1":0===this.bot2Cards.length?"Bot2":0===this.bot3Cards.length?"Bot3":0===this.bot4Cards.length?"Bot4":"Bot5";document.querySelector(".nine-result").setAttribute("style","display: block"),document.querySelector(".nine-winner").innerText=`Winner: ${t}`}else setTimeout((()=>{this.moveNine(this.currentPlayer)}),500)}else if(3===t){const t=[...this.currentPlayerPossibleMoves].filter((t=>this.bot3Cards.includes(t)));if(t.length>0&&(t.sort((()=>Math.random()-.5)),this.bot3Cards.splice(this.bot3Cards.indexOf(t[0]),1),document.querySelectorAll(".bot-cards")[2].innerText=`${this.bot3Cards.length}`,document.getElementById(`card${t[0]}`).setAttribute("class",`photo${t[0]}`),t[0]>=39?this.cardsOnBoard4.push(t[0]):t[0]>=26?this.cardsOnBoard3.push(t[0]):t[0]>=13?this.cardsOnBoard2.push(t[0]):t[0]>=0&&this.cardsOnBoard1.push(t[0])),this.currentPlayer=this.currentPlayer==this.players-1?0:4,0===this.bot1Cards.length||0===this.bot2Cards.length||0===this.playerCards.length||this.players>3&&0===this.bot3Cards.length||this.players>4&&0===this.bot4Cards.length||this.players>5&&0===this.bot5Cards.length){const t=0===this.playerCards.length?"You! Congratulations!":0===this.bot1Cards.length?"Bot1":0===this.bot2Cards.length?"Bot2":0===this.bot3Cards.length?"Bot3":0===this.bot4Cards.length?"Bot4":"Bot5";document.querySelector(".nine-result").setAttribute("style","display: block"),document.querySelector(".nine-winner").innerText=`Winner: ${t}`}else setTimeout((()=>{this.moveNine(this.currentPlayer)}),500)}else if(4===t){const t=[...this.currentPlayerPossibleMoves].filter((t=>this.bot4Cards.includes(t)));if(t.length>0&&(t.sort((()=>Math.random()-.5)),this.bot4Cards.splice(this.bot4Cards.indexOf(t[0]),1),document.querySelectorAll(".bot-cards")[3].innerText=`${this.bot4Cards.length}`,document.getElementById(`card${t[0]}`).setAttribute("class",`photo${t[0]}`),t[0]>=39?this.cardsOnBoard4.push(t[0]):t[0]>=26?this.cardsOnBoard3.push(t[0]):t[0]>=13?this.cardsOnBoard2.push(t[0]):t[0]>=0&&this.cardsOnBoard1.push(t[0])),this.currentPlayer=this.currentPlayer==this.players-1?0:5,0===this.bot1Cards.length||0===this.bot2Cards.length||0===this.playerCards.length||this.players>3&&0===this.bot3Cards.length||this.players>4&&0===this.bot4Cards.length||this.players>5&&0===this.bot5Cards.length){const t=0===this.playerCards.length?"You! Congratulations!":0===this.bot1Cards.length?"Bot1":0===this.bot2Cards.length?"Bot2":0===this.bot3Cards.length?"Bot3":0===this.bot4Cards.length?"Bot4":"Bot5";document.querySelector(".nine-result").setAttribute("style","display: block"),document.querySelector(".nine-winner").innerText=`Winner: ${t}`}else setTimeout((()=>{this.moveNine(this.currentPlayer)}),500)}else{const t=[...this.currentPlayerPossibleMoves].filter((t=>this.bot5Cards.includes(t)));if(t.length>0&&(t.sort((()=>Math.random()-.5)),this.bot5Cards.splice(this.bot5Cards.indexOf(t[0]),1),document.querySelectorAll(".bot-cards")[4].innerText=`${this.bot5Cards.length}`,document.getElementById(`card${t[0]}`).setAttribute("class",`photo${t[0]}`),t[0]>=39?this.cardsOnBoard4.push(t[0]):t[0]>=26?this.cardsOnBoard3.push(t[0]):t[0]>=13?this.cardsOnBoard2.push(t[0]):t[0]>=0&&this.cardsOnBoard1.push(t[0])),this.currentPlayer=0,0===this.bot1Cards.length||0===this.bot2Cards.length||0===this.playerCards.length||this.players>3&&0===this.bot3Cards.length||this.players>4&&0===this.bot4Cards.length||this.players>5&&0===this.bot5Cards.length){const t=0===this.playerCards.length?"You! Congratulations!":0===this.bot1Cards.length?"Bot1":0===this.bot2Cards.length?"Bot2":0===this.bot3Cards.length?"Bot3":0===this.bot4Cards.length?"Bot4":"Bot5";document.querySelector(".nine-result").setAttribute("style","display: block"),document.querySelector(".nine-winner").innerText=`Winner: ${t}`}else setTimeout((()=>{this.moveNine(this.currentPlayer)}),500)}}playerMove(t){for(let t=0;t<this.currentPlayerPossibleMoves.length;t+=1)-1!==this.playerCards.indexOf(this.currentPlayerPossibleMoves[t])&&document.getElementById(`myCard${this.currentPlayerPossibleMoves[t]}`).replaceWith(document.getElementById(`myCard${this.currentPlayerPossibleMoves[t]}`).cloneNode(!0));const e=Number(t.target.id.split("myCard")[1]);if(document.getElementById(`myCard${e}`)&&document.getElementById(`myCard${e}`).remove(),this.playerCards.splice(this.playerCards.indexOf(e),1),this.currentPlayer=this.currentPlayer==this.players-1?0:1,document.getElementById(`card${e}`).setAttribute("class",`photo${e}`),document.querySelector(".myCards").setAttribute("style","pointer-events: none"),document.querySelectorAll(".nine-card-my").forEach((t=>t.style.border="1px solid pink")),e>=39?this.cardsOnBoard4.push(e):e>=26?this.cardsOnBoard3.push(e):e>=13?this.cardsOnBoard2.push(e):e>=0&&this.cardsOnBoard1.push(e),this.currentPlayer=1,0===this.bot1Cards.length||0===this.bot2Cards.length||0===this.playerCards.length||this.players>3&&0===this.bot3Cards.length||this.players>4&&0===this.bot4Cards.length||this.players>5&&0===this.bot5Cards.length){const t=0===this.playerCards.length?"You! Congratulations!":0===this.bot1Cards.length?"Bot1":0===this.bot2Cards.length?"Bot2":0===this.bot3Cards.length?"Bot3":0===this.bot4Cards.length?"Bot4":"Bot5";document.querySelector(".nine-result").setAttribute("style","display: block"),document.querySelector(".nine-winner").innerText=`Winner: ${t}`}else setTimeout((()=>{this.moveNine(this.currentPlayer)}),500)}saveNineSettings(){const t=document.getElementById("nine-level").value,e=document.getElementById("nine-type").value;localStorage.setItem("nine-players",t),localStorage.setItem("nine-gameType",e)}updateBet(){document.getElementById("currentBet").innerText=`Текущая ставка: ${document.getElementById("range").value}`}after_render(){return i(this,void 0,void 0,(function*(){window.addEventListener("hashchange",(()=>{location.reload(),window.scrollTo({top:0,behavior:"smooth"})})),"start"===window.location.hash.split("/")[2]&&document.querySelector(".nine-start").addEventListener("click",this.saveNineSettings),"field"===window.location.hash.split("/")[2]&&setTimeout(this.startNine.bind(this),500)}))}}},360:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(409)),a=r(s(275)),o=r(s(730)),h=r(s(103)),l=r(s(843)),d=r(s(473)),c=r(s(298)),y=r(s(561)),u=r(s(113)),m={"/":new h.default,"/nine/:id":new l.default,"/2048":new y.default,"/battleships":new u.default},p=new o.default;e.default=class{router(){return i(this,void 0,void 0,(function*(){const t=n.default.parseRequestURL(),e=(t.resource?`/${t.resource}`:"/")+(t.id?"/:id":"")+(t.verb?"/:verb":""),s=m[e]?m[e]:p;a.default.drawPage(s)}))}renderHeaderAndFooter(){return i(this,void 0,void 0,(function*(){const t=yield a.default.drawComponent(d.default);document.getElementById("header_container").innerHTML=t;const e=yield a.default.drawComponent(c.default);document.getElementById("footer_container").innerHTML=e}))}init(){window.addEventListener("hashchange",this.router),window.addEventListener("load",this.renderHeaderAndFooter),window.addEventListener("load",this.router)}}},323:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(s(931));s(296),(new r.default).start()},892:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,n){function a(t){try{h(i.next(t))}catch(t){n(t)}}function o(t){try{h(i.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(a,o)}h((i=i.apply(t,e||[])).next())}))},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Request=e.Difficulty=void 0;const n=r(s(409)).default.getFullURL("");var a;(a=e.Difficulty||(e.Difficulty={}))[a.CASUAL=0]="CASUAL",a[a.NORMAL1=1]="NORMAL1",a[a.NORMAL2=2]="NORMAL2",a[a.HARD=3]="HARD";class o{static getWordsList(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${n}/words?group=${t.group||0}&page=${t.page||0}`,{method:"GET",headers:{Accept:"application/json"}});return yield e.json()}))}static getWordById(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${n}/words/${t}`,{method:"GET",headers:{Accept:"application/json"}});return yield e.json()}))}static createUser(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${n}/users`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});return yield e.json()}))}static getUserInfo(t,e){return i(this,void 0,void 0,(function*(){const s=yield fetch(`${n}/users/${t}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${e}`}});return yield s.json()}))}static editUserInfo(t,e,s,r){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${n}/users/${t}`,{method:"PUT",headers:{Accept:"application/json",Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({email:`${s}`,password:`${r}`})});return yield i.json()}))}static deleteUser(t,e){return i(this,void 0,void 0,(function*(){yield fetch(`${n}/users/${t}`,{headers:{Authorization:`Bearer ${e}`},method:"DELETE"})}))}static getNewToken(t,e){return i(this,void 0,void 0,(function*(){const s=yield fetch(`${n}/users/${t}/tokens`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${e}`}});return yield s.json()}))}static getUserWordsList(t,e){return i(this,void 0,void 0,(function*(){const s=yield fetch(`${n}/users/${t}/words`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${e}`}});return yield s.json()}))}static SetWordInUsersList(t,e,s,r){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${n}/users/${t}/words/${s}`,{method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({difficulty:`${r}`})});return yield i.json()}))}static getWordFromUserWordsList(t,e,s){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${n}/users/${t}/words/${s}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${e}`}});return yield i.json()}))}static editWordInUserWordsList(t,e,s,r){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${n}/users/${t}/words/${s}`,{method:"PUT",headers:{Accept:"application/json",Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({difficulty:`${r}`})});return yield i.json()}))}static deleteWordFromUsersList(t,e,s){return i(this,void 0,void 0,(function*(){yield fetch(`${n}/users/${t}/words/${s}`,{headers:{Authorization:`Bearer ${e}`},method:"DELETE"})}))}static getAggregatedWordsList(t){return i(this,void 0,void 0,(function*(){const e=(t.group?`&group=${t.group}`:"")+(t.page?`&page=${t.page}`:"")+(t.wordsPerPage?`&wordsPerPage=${t.wordsPerPage}`:"")+(t.filter?`&filter=${t.filter}`:""),s=e?`?${e.slice(1)}`:"",i=yield fetch(`${n}/users/${t.id}/aggregatedWords${s}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${t.token}`}});return yield i.json()}))}static getAggregatedWord(t,e,s){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${n}/users/${t}/aggregatedWords/${s}`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${e}`}});return yield i.json()}))}static editStatistics(t,e,s,r,a){return i(this,void 0,void 0,(function*(){const i=yield fetch(`${n}/users/${t}/statistics`,{method:"PUT",headers:{Accept:"application/json",Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({learnedWords:`${s}`,optional:{playedGames:`${r}`,successRate:`${a}`}})});return yield i.json()}))}static getStatistics(t,e){return i(this,void 0,void 0,(function*(){const s=yield fetch(`${n}/users/${t}/statistics`,{method:"GET",headers:{Accept:"application/json",Authorization:`Bearer ${e}`}});return yield s.json()}))}static loginUser(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(`${n}/signin`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});return yield e.json()}))}}e.Request=o,e.default=o},409:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});const s={parseRequestURL:()=>{const t=(window.location.hash.slice(1).toLowerCase()||"/").split("/");return{resource:t[1],id:t[2],verb:t[3]}},getFullURL:t=>"http://localhost:3001"+t};e.default=s}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var n=e[i]={exports:{}};return t[i].call(n.exports,n,n.exports,s),n.exports}s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s(323)})();